name: Upload files to UCSD's server

on:
  push:
    branches:
    - github-action

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
    
    - name: Install sshpass
      run: sudo apt install -y sshpass

    # Checkout
    - name: Checkout the repo
      uses: actions/checkout@master
      with:
        path: my-repo

    - name: Upload repo to remote server
      run: |
        sshpass -p ${{ secrets.PASSWORD }} scp -r my-repo ${{ secrets.USER }}@${{ secrets.HOST }}:${{ secrets.HOME_DIR }}/test/

    # # SCP to UCSD server and copy the website files
    # - name: Copy folder content recursively to remote
    #   uses: garygrossgarten/github-action-scp@release
    #   with:
    #     host: ${{ secrets.HOST }}
    #     username: ${{ secrets.USER }}
    #     password: ${{ secrets.PASSWORD }}
    #     port: ${{ secrets.PORT }}
    #     local: "./test"
    #     remote: "${{ secrets.HOME_DIR }}/test/"